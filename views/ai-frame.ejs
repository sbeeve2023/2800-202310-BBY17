<%- include('templates/header') %>

<%if(locals.recipe){%>
  <%- include('ai-recipe', {
    name: recipe.name || "Error",
    ingredients: recipe.ingredients || ["Error"],
    servings: recipe.serving_size || "Error",
    steps: recipe.steps || ["Error"],
    time: recipe.cook_time || "Error",
    restrictions: restrictions || ["Error"]}) %>
  <%}else{%>
    <img class="h-36 mr-3" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/2048px-ChatGPT_logo.svg.png"/>
    <h1 class="text-3xl font-semibold text-mmpr justify-center mb-4 text-center mt-4 font-title">Something went wrong.</h1>
    <%}%>



    <form action="/ai-substitute?recipeID=<%=recipeID%>">
      <input type="hidden" name="generate" value="true">
      <button type="submit" class="px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-mmpr rounded-md hover:bg-mmse focus:outline-none focus:bg-mmse" name="recipeID" value="<%=recipeID%>" onclick="showLoading()">
        Regenerate
      </button>
      <img id="loading" src="https://i.gifer.com/origin/34/34338d26023e5515f6cc8969aa027bca_w200.gif" alt="Loading..." hidden/>
      </form>

  <script>
    function showLoading(){
    document.getElementById("loading").hidden = false;
    }
  </script>
<%- include('templates/footer') %>